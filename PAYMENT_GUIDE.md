# 支付说明文档

## 订阅计划

### 免费版
- **价格**: ¥0/永久
- **功能**:
  - 50个提示词
  - 10次AI优化/月
  - 基础分类管理
  - 社区支持

### 基础版
- **价格**: ¥9.9/月
- **功能**:
  - 200个提示词
  - 100次AI优化/月
  - 版本管理
  - 高级分类
  - 批量操作
  - 优先支持

### 专业版
- **价格**: ¥19.9/月
- **功能**:
  - 无限提示词
  - 500次AI优化/月
  - 多模型对比
  - 数据导出
  - 团队协作
  - 专属客服

---

## 支付方式

### 方式一: 支付宝/微信支付

1. 在订阅页面点击"立即订阅"按钮
2. 扫描弹出的收款二维码
3. 完成支付后,记录支付订单号
4. 联系客服提供订单号和用户信息

### 方式二: 直接联系客服

- **客服邮箱**: p.harrywu@gmail.com
- **客服电话**: 8613138112934
- **工作时间**: 工作日 9:00-18:00
- **响应时间**: 24小时内

---

## 如何添加收款码

管理员需要在项目中添加收款码图片:

1. 生成支付宝/微信收款码(固定金额¥9.9和¥19.9)
2. 将收款码图片保存到 `client/public/` 目录,例如:
   - `client/public/qrcode-basic.png` (基础版)
   - `client/public/qrcode-pro.png` (专业版)
3. 修改 `client/src/pages/Subscription.tsx` 文件,将收款码占位区域替换为:
   ```tsx
   <img 
     src={selectedPlan === 'basic' ? '/qrcode-basic.png' : '/qrcode-pro.png'}
     alt="收款码"
     className="w-48 h-48 mx-auto"
   />
   ```

---

## 管理员操作指南

### 查看用户列表

1. 以管理员身份登录
2. 点击右上角头像 → "用户管理"
3. 查看所有用户的订阅状态

### 手动开通订阅

1. 在用户列表中找到对应用户
2. 点击"管理订阅"按钮
3. 选择订阅计划(免费版/基础版/专业版)
4. 设置订阅时长(天数),留空表示永久有效
5. 点击"确认更新"

### 订阅通知

- 当管理员为用户开通订阅后,系统会自动发送通知
- 用户可以在顶部通知中心查看

---

## 常见问题

**Q: 支付后多久开通?**
A: 联系客服后,我们会在24小时内为您开通订阅。

**Q: 可以随时取消吗?**
A: 可以,联系客服即可取消订阅,到期后自动降级为免费版。

**Q: 订阅到期后会怎样?**
A: 订阅到期后自动降级为免费版,您的数据不会丢失,但部分高级功能将无法使用。

**Q: 可以升级订阅吗?**
A: 可以,随时联系客服升级到更高级别的订阅计划。

**Q: 支持退款吗?**
A: 支持7天无理由退款,请联系客服处理。

---

## 技术说明

### 数据库字段

用户订阅信息存储在 `users` 表中:

- `subscriptionTier`: 订阅等级 (free/basic/pro)
- `subscriptionStatus`: 订阅状态 (active/canceled/past_due/trialing)
- `subscriptionEndDate`: 订阅到期时间

### API接口

- `subscription.info`: 获取当前用户订阅信息
- `subscription.listAllUsers`: 获取所有用户列表(管理员)
- `subscription.upgradeUser`: 手动升级用户订阅(管理员)

### 功能限制检查

系统会在以下操作时检查订阅限制:

- 创建提示词: 检查提示词数量限制
- AI优化: 检查优化次数限制
- 达到限制时会自动发送通知,引导用户升级

---

## 更新日志

### v1.0.0 (2024-01-XX)
- 移除Stripe支付集成
- 改用支付宝/微信收款码方式
- 实现管理员手动订阅管理
- 添加订阅通知功能
