# TeachPT - 教育行业 AI 资产管理平台

<div align="center">
  <img src="pic/介绍页1.png" alt="TeachPT 介绍页" width="100%" />
</div>

<br/>

## 📖 项目简介

**TeachPT 是专为教育行业打造的 AI 提示词（Prompt）资产管理平台。**

在 AI 赋能教育的时代，教师们每天都在使用 AI 工具辅助教学——生成教案、设计作业、分析学情、撰写评语。但这些宝贵的 AI 对话经验往往散落在聊天记录里，无法沉淀为学校的数字资产。

TeachPT 解决的核心问题：
- 📚 **资产零散** → 集中管理：将分散的 AI 指令统一存储、分类
- 🎯 **质量参差** → 智能优化：AI 自动评分和优化建议
- 🔄 **难以复用** → 模板化：将优秀经验固化为可复用的标准模板
- 📊 **价值不明** → 数据可视：使用统计、质量分析一目了然

<div align="center">
  <img src="pic/介绍页2.png" alt="TeachPT 核心价值" width="100%" />
</div>

---

## ✨ 核心功能

### 1️⃣ 提示词管理库

**个人知识库 + 团队协作**

- 支持创建、编辑、分类存储各类 AI 提示词
- 三级场景分类体系：学科 → 教学环节 → 具体场景
- 版本历史记录，随时回溯修改
- 收藏、标记、导出等便捷功能

<div align="center">
  <img src="pic/个人提示词库.png" alt="个人提示词库" width="80%" />
</div>

**提示词详情页：完整的使用体验**

<div align="center">
  <img src="pic/提示词库卡片示例.png" alt="提示词卡片" width="80%" />
</div>

**版本历史 + 使用统计**

<div align="center">
  <img src="pic/提示词版本历史和使用历史.png" alt="版本历史" width="80%" />
</div>

---

### 2️⃣ AI 智能优化助手

**从"口语化"到"专业化"的桥梁**

很多老师有好的教学想法，但不知道如何写出让 AI 精准理解的指令。TeachPT 内置 AI 优化助手：

- 输入简单的教学意图（如"帮我出几道物理题"）
- AI 自动扩充为结构化专业指令
- 支持 CRISPE、BROKE、CO-STAR 等多种优化框架
- 实时评分反馈（结构性、清晰度、场景适配度）

<div align="center">
  <img src="pic/提示词优化助手页.png" alt="提示词优化助手" width="80%" />
</div>

**AI 自动评分和分析**

<div align="center">
  <img src="pic/AI分析提示词内容.png" alt="AI 分析内容" width="80%" />
</div>

<div align="center">
  <img src="pic/提示词内容评分.png" alt="内容评分" width="80%" />
</div>

---

### 3️⃣ 应用场景分类体系

**懂教育的标签体系**

通用工具只有简单的文件夹，TeachPT 深度理解教育场景：

- **三级分类**：学科教学 → 语文 → 备课设计
- 涵盖学科教学、班级管理、教研发展、通用技能、学生辅导、学校管理等 6 大领域
- 快速筛选："初中数学 - 人教版 - 几何证明"
- 支持自定义场景分类

<div align="center">
  <img src="pic/应用场景三级分类.png" alt="应用场景分类" width="80%" />
</div>

**智能标签自动分类**

<div align="center">
  <img src="pic/场景:标签自动分类.png" alt="自动分类" width="80%" />
</div>

<div align="center">
  <img src="pic/自动标签提示词.png" alt="自动标签" width="80%" />
</div>

---

### 4️⃣ 模板标准化与市场

**让优秀经验规模化复制**

如何确保全校教案生成风格统一？如何推广优秀备课方法？

- 将验证过的提示词固化为"模板"
- 普通教师只需填空（如输入课题名称）即可获得高水准产出
- 模板市场：浏览、使用其他教师共享的优质模板

<div align="center">
  <img src="pic/提示词模板标准化.png" alt="模板标准化" width="80%" />
</div>

<div align="center">
  <img src="pic/提示词市场.png" alt="提示词市场" width="80%" />
</div>

---

### 5️⃣ 数据看板与审计

**看见 AI 资产的价值**

管理者视角：

- 📊 使用统计看板：哪些指令被高频使用
- 📈 质量分析：哪些指令评分较低需要优化
- 📋 审计日志：完整记录所有操作历史
- 🎯 投资回报：量化 AI 资产建设成果

<div align="center">
  <img src="pic/提示词使用看板.png" alt="使用看板" width="80%" />
</div>

<div align="center">
  <img src="pic/审计日志.png" alt="审计日志" width="80%" />
</div>

---

### 6️⃣ 辅助工具集

**让教学创作更高效**

#### 📷 文生图工作台
- 多模型支持（DALL-E、Stable Diffusion、MidJourney 等）
- 课件插图快速生成
- 历史记录保存

<div align="center">
  <img src="pic/文生图界面.png" alt="文生图界面" width="80%" />
</div>

#### 🔗 飞书集成
- 保存飞书对话为提示词
- 随时随地捕捉灵感

<div align="center">
  <img src="pic/支持飞书对话保存.png" alt="飞书集成" width="80%" />
</div>

#### 🔑 API 密钥管理
- 统一管理多个 AI 服务商密钥
- 模型分类与权限控制
- 连接测试与使用统计

<div align="center">
  <img src="pic/API密钥服务.png" alt="API 密钥管理" width="80%" />
</div>

<div align="center">
  <img src="pic/模型分类 1.png" alt="模型分类" width="80%" />
</div>

#### 🤖 AI 客服助手
- 场景推荐
- 使用指导
- 智能问答

<div align="center">
  <img src="pic/AI客服助手.png" alt="AI 客服" width="80%" />
</div>

---

## 🏗️ 技术架构

### 前端技术栈
- **框架**: React 19 + Vite
- **UI 库**: Tailwind CSS + shadcn/ui
- **路由**: Wouter
- **状态管理**: TanStack Query
- **动画**: Framer Motion
- **图表**: Recharts
- **Markdown**: react-markdown + rehype-highlight

### 后端技术栈
- **运行时**: Node.js 20
- **框架**: Express
- **API 层**: tRPC (端到端类型安全)
- **数据库**: MySQL 8.0
- **ORM**: Drizzle ORM
- **认证**: Supabase Auth (支持 GitHub、Google 登录)
- **AI 集成**: OpenAI SDK（兼容多种模型）

### 部署方案
- **容器化**: Docker + Docker Compose
- **CI/CD**: GitHub Actions
- **服务器**: 支持任意 Linux 服务器部署

---

## 🚀 快速开始

### 环境要求

- Node.js >= 18.0.0
- pnpm >= 8.0.0
- MySQL >= 8.0

### 本地开发

#### 1. 克隆项目

```bash
git clone https://github.com/yourusername/prompt-workflow-manager.git
cd prompt-workflow-manager
```

#### 2. 安装依赖

```bash
pnpm install
```

#### 3. 配置环境变量

复制 `.env.example` 为 `.env`，填入必要配置：

```bash
cp .env.example .env
```

关键配置项：

```env
# 数据库连接
DATABASE_URL=mysql://user:password@localhost:3306/teachpt

# Supabase 认证
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
SUPABASE_JWT_SECRET=your-jwt-secret

# 前端环境变量
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key
VITE_APP_TITLE=TeachPT
```

#### 4. 初始化数据库

```bash
# 推送数据库 Schema
pnpm db:push

# 初始化场景分类数据（可选）
pnpm db:seed
```

#### 5. 启动开发服务器

```bash
pnpm dev
```

访问 `http://localhost:5173`

---

### Docker 部署

#### 1. 构建镜像

```bash
docker compose build
```

#### 2. 启动服务

```bash
docker compose up -d
```

服务将在 `http://localhost:1060` 启动。

#### 3. 初始化数据库

```bash
# 进入容器
docker compose exec app sh

# 推送 Schema 并初始化场景
cd /app
pnpm db:push
node dist/seedScenarios.js
```

---

## 📋 常见问题

### 1. 登录后出现无限重定向循环？

**原因**：数据库 `users` 表缺少必要字段。

**解决**：执行以下 SQL：

```sql
ALTER TABLE `users` ADD COLUMN `subscriptionTier` enum('free','basic','pro') DEFAULT 'free' NOT NULL;
ALTER TABLE `users` ADD COLUMN `subscriptionStatus` enum('active','canceled','past_due','trialing');
ALTER TABLE `users` ADD COLUMN `invitationCodeId` int;
```

### 2. 中文字符显示为乱码？

**原因**：MySQL 连接字符集不是 UTF-8。

**解决**：在数据库连接字符串中添加：

```
DATABASE_URL=mysql://user:password@localhost:3306/teachpt?charset=utf8mb4
```

或在执行 SQL 前设置：

```sql
SET NAMES utf8mb4;
```

### 3. 场景分类数据重复？

**原因**：多次执行初始化脚本。

**解决**：

```bash
# 方式1：通过 API 强制重置（推荐）
curl -X POST http://localhost:1060/api/trpc/scenarios.initializePresets?batch=1 \
  -H "Content-Type: application/json" \
  -d '{"0":{"forceReset":true}}'

# 方式2：手动清理后重新初始化
# 清空场景数据
DELETE FROM scenarios WHERE isCustom = 0;

# 重新初始化
node dist/seedScenarios.js
```

### 4. Docker 构建时依赖下载失败？

**原因**：npm 官方源在国内访问较慢。

**解决**：Dockerfile 已配置腾讯云镜像源，如仍有问题可手动修改：

```dockerfile
RUN npm config set registry https://registry.npmmirror.com
```

### 5. Supabase 认证配置问题？

**关键点**：
- `SUPABASE_JWT_SECRET` 需要进行 Base64 解码后使用
- 确保 Supabase 项目中已启用对应的第三方登录方式（GitHub/Google）
- 回调 URL 需要在 Supabase 后台添加到白名单

### 6. 如何添加新的 AI 模型？

在 `API 密钥管理` 页面添加：

1. 点击"添加 API 密钥"
2. 填写服务商名称、API URL、密钥
3. 输入支持的模型列表（JSON 数组格式）
4. 测试连接后保存

### 7. 数据库迁移失败？

```bash
# 查看当前迁移状态
pnpm drizzle-kit introspect

# 生成新的迁移文件
pnpm drizzle-kit generate

# 手动执行迁移
pnpm drizzle-kit migrate
```

---

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

### 开发流程

1. Fork 本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 提交 Pull Request

### 代码规范

- 使用 TypeScript
- 遵循 ESLint 配置
- 提交前运行 `pnpm check` 检查类型

---

## 📄 开源协议

本项目采用 [MIT License](LICENSE)。

---

## 🙏 致谢

感谢所有为教育信息化做出贡献的开发者和教育工作者。

如果这个项目对你有帮助，欢迎 Star ⭐️

---

<div align="center">
  <p>由教育工作者为教育工作者打造</p>
  <p>Made with ❤️ by the TeachPT Team</p>
</div>
